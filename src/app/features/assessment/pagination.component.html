<!-- Pagination Header -->
<div class="pagination-header mb-4" *ngIf="totalPages > 1">
  <div class="d-flex justify-content-between align-items-center">
    <div class="page-info">
      <h6 class="mb-0">
        <span *ngIf="currentStageName; else defaultPageInfo">
          {{ currentStageName }} Maturity Stage
          <small class="text-muted">
            ({{ currentStageItemCount }} items)
          </small>
        </span>
        <ng-template #defaultPageInfo>
          Page {{ currentPage }} of {{ totalPages }}
          <small class="text-muted">
            ({{ getStartItem() }}-{{ getEndItem() }} of {{ totalItems }} items)
          </small>
        </ng-template>
      </h6>
    </div>
    <div class="page-actions" *ngIf="showSaveButton">
      <button class="btn btn-outline-secondary btn-sm me-2"
              (click)="onSaveClick()"
              [disabled]="currentStageItemCount === 0">
        <i class="bi bi-floppy"></i> Save Current Stage
      </button>
    </div>
  </div>
</div>

<!-- Pagination Navigation -->
<div class="pagination-navigation d-flex justify-content-between align-items-center mb-4" *ngIf="totalPages > 1">
  <button type="button"
          class="btn btn-outline-primary"
          (click)="onPreviousClick()"
          [disabled]="currentPage === 1">
    <i class="bi bi-chevron-left"></i> Previous Stage
  </button>

  <nav aria-label="Maturity stage navigation" *ngIf="availableStages.length > 0; else defaultPagination">
    <div class="d-flex gap-2 flex-wrap justify-content-center">
      <button type="button"
              *ngFor="let stage of availableStages; let i = index"
              class="btn btn-sm"
              [ngClass]="(i + 1) === currentPage ? getStageColorClass(stage) : 'btn-outline-secondary'"
              (click)="onPageClick(i + 1)">
        {{ stage }}
      </button>
    </div>
  </nav>

  <ng-template #defaultPagination>
    <nav aria-label="Assessment pagination">
      <ul class="pagination mb-0">
        <li class="page-item" *ngFor="let page of getPageNumbers()" [class.active]="page === currentPage">
          <button type="button" class="page-link" (click)="onPageClick(page)">{{ page }}</button>
        </li>
      </ul>
    </nav>
  </ng-template>

  <button type="button"
          class="btn btn-outline-primary"
          (click)="onNextClick()"
          [disabled]="currentPage === totalPages">
    Next Stage <i class="bi bi-chevron-right"></i>
  </button>
</div>
